<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Forum</title>
    <style>

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .navbar {
            background-color: #333;
            color: #fff;
            padding: 10px;
            /*text-align: center;*/
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar h1 {
            font-family: Brush Script MT, cursive;
            margin: 0;
            padding: 0;
            flex:1;   /*讓標題佔據剩餘空間*/

        }

        .container {
            flex: 1;
            display: flex;
        }

        .board-list {
            font-family: 'Garamond', serif;
            flex: 0 0 200px; /* 固定寬度 */
            background-color: #f4f4f4;
            padding: 10px;
            padding-left: 300px; /* 添加右邊間隙 */
        }

        .article-list {
            flex: 1;
            background-color: aliceblue;
            padding: 10px;
            padding-right: 300px; /* 添加左邊間隙 */
        }

        .board-list h2, .article-list h2 {
            margin: 0 0 10px 0;
            padding: 0;
        }

        ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        li {
            padding: 5px 0;
        }

        a {
            color: #333;
            text-decoration: none;
        }

        a:hover {
            color: #000;
            text-decoration: underline;
        }

        .publish-btn {
            background-color: #4CAF50;
            border: none;
            color: white;
            text-align: center;
            text-decoration: none;
            font-size: 16px;
            cursor: pointer;
        }


    </style>
</head>
<div class="navbar">
    <h1>Stock Friends</h1>
    <button class="publish-btn" onclick="publishArticle()">Post</button>
    <button class="match-btn">Match</button>
    <button class="account-btn">Log-In / Account</button>
</div>

<div class="container">
    <div class="board-list">
        <h2>Other Topics</h2>
        <ul>
            <li><a href="#">Gaming</a></li>
            <li><a href="#">Sports</a></li>
            <li><a href="#">Business</a></li>
            <li><a href="#">Crypto</a></li>
            <li><a href="#">Television</a></li>
            <li><a href="#">Celebrity</a></li>
        </ul>
    </div>

    <div class="article-list" id="articleList">
        <h2>文章列表</h2>
        <!-- 文章列表将在这里动态渲染 -->
    </div>
</div>

<script>
    function publishArticle() {
        // pop up input space
        var title = prompt("請輸入文章標題:");
        var content = prompt("請輸入文章內容:");
        var username = prompt("請輸入您的用戶名:");

        // send to backend
        var article = {
            title: title,
            content: content,
            username: username
        };

        fetch('/postArticle', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(article)
        })
            .then(response => {
                if (response.ok) {
                    alert("文章發佈成功！");
                    // 刷新文章列表
                    fetchArticles();
                } else {
                    alert("文章發佈失敗！");
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert("文章發佈失敗！");
            });
    }

    function fetchArticles() {
        // 渲染到頁面上
        fetch('/getAllArticle')
            .then(response => response.json())
            .then(articles => {
                var articleList = document.getElementById('articleList');
                articleList.innerHTML = ''; // 清空之前的文章列表

                articles.forEach(article => {
                    var articleDiv = document.createElement('div');
                    articleDiv.innerHTML = `
                    <h3>${article.title}</h3>
                    <p>${article.content}</p>
                    <p>作者：${article.username}</p>
                    <hr>
                `;
                    articleList.appendChild(articleDiv);
                });
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }

    // 頁面加載時獲取文章列表
    window.onload = function() {
        fetchArticles();
    };
</script>

</body>
</html>
